(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{115:function(e,t,r){},116:function(e,t,r){},184:function(e,t,r){},185:function(e,t,r){},191:function(e,t,r){},192:function(e,t,r){},194:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(25),i=r.n(s),c=r(20),o=r.n(c),u=r(28),d=r(57),l=r(58),v=r(107),h=r(104),f=r(201),p=r(199),g=r(202),m=r(200),b=r(203),j=r(6),x=function(e){var t=e.errorTitle;return Object(j.jsx)(b.a,{message:"Error",description:t,type:"error",showIcon:!0})};x.defaultProps={errorTitle:""};var S=x,O=r(205),y=r(206),k=r(204),w=r(105),_=(r(115),function(e){var t=e.getGenres,r=e.id,n=Object(a.useState)(null),s=Object(w.a)(n,2),i=s[0],c=s[1],d=function(){var e=Object(u.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,a.filter((function(e){return e.id===r}))[0];case 5:n=e.sent,c(n.name);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){d()})),Object(j.jsx)("li",{className:"movieGenres-genre",children:i})});_.defaultProps={id:0,getGenres:function(){}};var I=_,M=n.a.createContext(),N=M.Provider,T=M.Consumer,E=(r(116),function(e){var t=e.movieImgSrc,r=e.movieName,a=e.releaseDate,n=e.description,s=e.average,i=e.genresId,c=e.sessionId,o=e.rating,u=e.id,d="movie-average";return s>=0&&s<=3?d+=" movie-average__border-rad":s>3&&s<=5?d+=" movie-average__border-orange":s>5&&s<=7?d+=" movie-average__border-yellow":s>7&&(d+=" movie-average__border-green"),Object(j.jsx)(T,{children:function(e){var l=e.getGenres,v=e.rateMovie;return Object(j.jsx)(y.a,{span:12,children:Object(j.jsxs)("div",{className:"movie",children:[Object(j.jsx)("div",{className:"img-container",children:Object(j.jsx)("img",{alt:"movieBaner",src:t})}),Object(j.jsxs)("div",{className:"main-content",children:[Object(j.jsxs)("div",{className:"movie-info",children:[Object(j.jsxs)("div",{className:"movie-title",children:[Object(j.jsx)("h2",{children:r}),Object(j.jsx)("div",{className:d,children:Object(j.jsx)("p",{children:s})})]}),Object(j.jsx)("p",{className:"movie-releaseDate",children:a}),Object(j.jsx)("ul",{className:"movieGenres",children:i.map((function(e){return Object(j.jsx)(I,{centered:!0,getGenres:l,id:e,className:"movieGenres-genre",children:"Action"},e)}))}),Object(j.jsx)("p",{className:"movie-description",children:n})]}),Object(j.jsx)(k.a,{allowHalf:!0,count:10,defaultValue:o,style:{fontSize:17,marginBottom:10},onChange:function(e){return v(c,String(u),e)}})]})]})})}})});E.defaultProps={id:0,rating:0,average:0,genresId:[],sessionId:"",movieName:"",movieImgSrc:"",releaseDate:"",description:""};var D=E,L=(r(184),function(e){var t=e.moviesData,r=e.sessionId;return Object(j.jsx)("section",{className:"main",children:Object(j.jsx)(O.a,{gutter:[36,35],children:t.map((function(e){var t=e.id,a=e.movieImgSrc,n=e.movieName,s=e.releaseDate,i=e.description,c=e.average,o=e.genresId,u=e.rating;return Object(j.jsx)(D,{id:t,rating:u,average:c,genresId:o,sessionId:r,movieName:n,movieImgSrc:a,releaseDate:s,description:i},t)}))})})});L.defaultProps={sessionId:"",moviesData:[]};var P=L,C=r(198),R=(r(185),function(){return Object(j.jsx)("div",{className:"spinner",children:Object(j.jsx)(C.a,{size:"large"})})}),G=r(99),z=(r(191),function(e){var t=e.updateSearchString;return Object(j.jsx)("form",{children:Object(j.jsx)("input",{className:"stringRequest",type:"text",placeholder:"Type to search...",onChange:Object(G.debounce)((function(e){var r;(r=e.target.value)&&t(r)}),1e3),autoFocus:!0})})});z.defaultProps={updateSearchString:function(){}};var A=z,q=function(){function e(){Object(d.a)(this,e)}return Object(l.a)(e,[{key:"getResources",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.themoviedb.org/3/search/movie?api_key=e3fe247be4eaa72ef7d3bce48bf58608",e.next=3,fetch("".concat("https://api.themoviedb.org/3/search/movie?api_key=e3fe247be4eaa72ef7d3bce48bf58608").concat(t));case 3:if((r=e.sent).ok){e.next=6;break}throw new Error;case 6:return e.next=8,r.json();case 8:if(0!==(a=e.sent).results.length){e.next=11;break}throw new Error;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGenres",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.themoviedb.org/3/genre/movie/list?api_key=e3fe247be4eaa72ef7d3bce48bf58608",e.next=3,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e3fe247be4eaa72ef7d3bce48bf58608");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error;case 6:return e.next=8,t.json();case 8:return r=e.sent,e.abrupt("return",r.genres);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"\u0441reateGuestSession",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("sessionId")){e.next=12;break}return"https://api.themoviedb.org/3/authentication/guest_session/new?api_key=e3fe247be4eaa72ef7d3bce48bf58608",e.next=5,fetch("https://api.themoviedb.org/3/authentication/guest_session/new?api_key=e3fe247be4eaa72ef7d3bce48bf58608");case 5:if((t=e.sent).ok){e.next=8;break}throw new Error;case 8:return e.next=10,t.json();case 10:r=e.sent,localStorage.setItem("sessionId",r.guest_session_id);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getGuestSession",value:function(){var e=Object(u.a)(o.a.mark((function e(t,r){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/guest_session/".concat(t,"/rated/movies?api_key=e3fe247be4eaa72ef7d3bce48bf58608").concat(r));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error;case 5:return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"rateMovie",value:function(e,t,r){fetch("https://api.themoviedb.org/3/movie/".concat(t,"/rating?api_key=e3fe247be4eaa72ef7d3bce48bf58608&guest_session_id=").concat(e),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({value:r})})}}]),e}(),B=(r(192),r.p+"static/media/no_image.f55aafa2.jpg"),F=function(e){Object(v.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(d.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).mdbapiServices=new q,e.state={ratedPage:1,sessionId:"",searchPage:1,searchString:"",ratedTotal:null,searchTotal:null,ratedError:!1,searchError:!1,ratedLoading:!1,searchLoading:!1,errorTitle:"We did not find any movies for this request."},e.\u0441reateSessionId=Object(u.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.mdbapiServices.\u0441reateGuestSession(),r=localStorage.getItem("sessionId"),e.setState({sessionId:r});case 3:case"end":return t.stop()}}),t)}))),e.createMovieCard=function(e,t,r,a,n,s,i){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return{id:e,movieImgSrc:t,movieName:r,releaseDate:a,description:n,average:s,genresId:i,rating:c}},e.createSearchMovieList=function(t,r){var a=r?t.slice(10):t.slice(0,10);a=a.map((function(t){return e.createMovieCard(t.id,e.getImgSrc(t.poster_path),t.original_title,e.formatDate(t.release_date),e.formatMovieDescription(t.overview),t.vote_average,t.genre_ids)})),e.setState({searchMoviesData:a,searchLoading:!1,searchError:!1})},e.createRatedMovieList=function(t,r){var a=r?t.slice(10):t.slice(0,10);a=a.map((function(t){return e.createMovieCard(t.id,e.getImgSrc(t.poster_path),t.original_title,e.formatDate(t.release_date),e.formatMovieDescription(t.overview),t.vote_average,t.genre_ids,t.rating)})),e.setState({ratedMoviesData:a,ratedLoading:!1,ratedError:!1})},e.updateSearchString=function(t){var r=e.state.searchPage;e.setState({searchString:t}),e.updateSearchMovieList(t,r)},e.updateSearchPage=function(t){var r=e.state.searchString;e.updateSearchMovieList(r,t)},e.updateRatedPage=function(t){var r=e.state.sessionId;e.setState({ratedPage:t}),e.updateRatedMovieList(r,t)},e.getImgSrc=function(e){return e?"https://image.tmdb.org/t/p/w200/".concat(e):B},e.onSearchError=function(t){"Failed to fetch"===t.message?e.setState({errorTitle:"Check your internet connection!"}):e.setState({errorTitle:"We did not find any movies for this request."}),e.setState({searchError:!0,searchTotal:null,searchLoading:!1})},e.onRatedError=function(t){"Failed to fetch"===t.message?e.setState({errorTitle:"Check your internet connection!"}):e.setState({errorTitle:"We have had some server trouble, and the films you have rated failed to display. Try your luck later."}),e.setState({ratedError:!0,ratedTotal:null,ratedLoading:!1})},e.callback=function(t){var r=e.state,a=r.sessionId,n=r.ratedPage;"2"===t&&e.updateRatedMovieList(a,n)},e.updateSearchMovieList=function(){var t=Object(u.a)(o.a.mark((function t(r,a){var n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({searchError:!1,searchLoading:!0}),t.prev=1,n=a%2===0?a/2:(a+1)/2,t.next=5,e.mdbapiServices.getResources("&page=".concat(n,"&query=").concat(r));case 5:s=t.sent,e.createSearchMovieList(s.results,a%2===0),e.setState({searchTotal:s.total_results}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.onSearchError(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}(),e.updateRatedMovieList=function(){var t=Object(u.a)(o.a.mark((function t(r,a){var n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({ratedError:!1,ratedLoading:!0}),t.prev=1,n=a%2===0?a/2:(a+1)/2,t.next=5,e.mdbapiServices.getGuestSession(r,"&page=".concat(n));case 5:s=t.sent,e.createRatedMovieList(s.results,a%2===0),e.setState({ratedTotal:s.total_results}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.onRatedError(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.\u0441reateSessionId()}},{key:"formatMovieDescription",value:function(e){var t=e.split(" ");return t.length>15?"".concat(t.slice(0,15).join(" "),"..."):t.join(" ")}},{key:"formatDate",value:function(e){return e?Object(f.a)(Object(p.a)(e),"MMMM d, yyyy"):"NA"}},{key:"render",value:function(){var e=this.state,t=e.ratedPage,r=e.sessionId,a=e.errorTitle,n=e.searchPage,s=e.ratedTotal,i=e.ratedError,c=e.searchError,o=e.searchTotal,u=e.ratedLoading,d=e.searchLoading,l=e.ratedMoviesData,v=e.searchMoviesData,h=g.a.TabPane,f=!(u||i),p=!(d||c),b=u?Object(j.jsx)(R,{}):null,x=d?Object(j.jsx)(R,{}):null,O=c?Object(j.jsx)(S,{errorTitle:a}):null,y=i?Object(j.jsx)(S,{errorTitle:a}):null,k=f?Object(j.jsx)(P,{moviesData:l,sessionId:r}):null,w=p?Object(j.jsx)(P,{moviesData:v,sessionId:r}):null,_=o?Object(j.jsx)(m.a,{showSizeChanger:!1,defaultCurrent:n,pageSize:10,total:o,onChange:this.updateSearchPage}):null,I=s?Object(j.jsx)(m.a,{showSizeChanger:!1,defaultCurrent:t,pageSize:10,total:s,onChange:this.updateRatedPage}):null;return Object(j.jsx)("section",{className:"movieApp",children:Object(j.jsx)(N,{value:this.mdbapiServices,children:Object(j.jsxs)(g.a,{centered:!0,defaultActiveKey:"1",onChange:this.callback,children:[Object(j.jsxs)(h,{tab:"Search",children:[Object(j.jsx)(A,{updateSearchString:this.updateSearchString}),x,w,O,Object(j.jsx)("div",{className:"paginator",children:_})]},"1"),Object(j.jsxs)(h,{tab:"Rated",children:[b,k,y,Object(j.jsx)("div",{className:"paginator",children:I})]},"2")]})})})}}]),r}(a.Component);r(193);i.a.render(Object(j.jsx)(F,{}),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.ff912375.chunk.js.map