{"version":3,"sources":["components/errorIndicator/errorIndicator.jsx","components/movieGenres/movieGenres.jsx","components/mdbApi-service-context/mdbApi-service-context.jsx","components/movie/movie.jsx","components/moviesList/moviesList.jsx","components/spinner/spinner.jsx","components/stringRequestMovies/stringRequestMovies.jsx","services/mdbapiServices.jsx","components/app/no_image.jpg","components/app/app.jsx","index.jsx"],"names":["ErrorIndicator","errorTitle","message","description","type","showIcon","defaultProps","MovieGenres","getGenres","id","useState","genre","setGenre","getGenre","a","genres","filter","element","res","name","useEffect","className","React","createContext","MdbapiServiceProvider","Provider","MdbapiServiceConsumer","Consumer","Movie","movieImgSrc","movieName","releaseDate","average","genresId","sessionId","rating","rateMovie","span","alt","src","map","centered","allowHalf","count","defaultValue","style","fontSize","marginBottom","onChange","String","MoviesList","moviesData","gutter","Spinner","size","StringRequestMovies","updateSearchString","placeholder","debounce","event","text","target","value","autoFocus","MdbapiServices","fragment","fetch","ok","Error","json","body","results","length","localStorage","getItem","authentication","guestSession","setItem","guest_session_id","guestSessionId","movieId","method","headers","JSON","stringify","App","mdbapiServices","state","ratedPage","searchPage","searchString","ratedTotal","searchTotal","ratedError","searchError","ratedLoading","searchLoading","сreateSessionId","сreateGuestSession","newSessionId","setState","createMovieCard","createSearchMovieList","movies","isEven","newArr","slice","movie","getImgSrc","poster_path","original_title","formatDate","release_date","formatMovieDescription","overview","vote_average","genre_ids","searchMoviesData","createRatedMovieList","ratedMoviesData","updateSearchMovieList","updateSearchPage","page","updateRatedPage","updateRatedMovieList","imgName","icon","onSearchError","error","onRatedError","callback","activeKey","query","newPage","getResources","movieList","total_results","getGuestSession","this","words","split","join","date","format","parseISO","TabPane","Tabs","hasRatedData","hasSearchData","ratedSpinner","searchSpinner","searchErrorMessage","ratedErrorMessage","ratedContent","searchContent","searchPagination","showSizeChanger","defaultCurrent","pageSize","total","ratedPagination","defaultActiveKey","tab","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff912375.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert } from 'antd';\n\nconst ErrorIndicator = ({ errorTitle }) => <Alert message=\"Error\" description={errorTitle} type=\"error\" showIcon />;\n\nErrorIndicator.defaultProps = {\n  errorTitle: '',\n};\n\nErrorIndicator.propTypes = {\n  errorTitle: PropTypes.string,\n};\n\nexport default ErrorIndicator;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './movieGenres.css';\n\nconst MovieGenres = ({ getGenres, id }) => {\n  const [genre, setGenre] = useState(null);\n\n  const getGenre = async () => {\n    const genres = await getGenres();\n\n    const res = await genres.filter((element) => element.id === id)[0];\n\n    setGenre(res.name);\n  };\n\n  useEffect(() => {\n    getGenre();\n  });\n\n  return <li className=\"movieGenres-genre\">{genre}</li>;\n};\n\nMovieGenres.defaultProps = {\n  id: 0,\n  getGenres: () => {},\n};\n\nMovieGenres.propTypes = {\n  id: PropTypes.number,\n  getGenres: PropTypes.func,\n};\n\nexport default MovieGenres;\n","import React from 'react';\n\nconst { Provider: MdbapiServiceProvider, Consumer: MdbapiServiceConsumer } = React.createContext();\n\nexport { MdbapiServiceProvider, MdbapiServiceConsumer };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Col, Rate } from 'antd';\nimport MovieGenres from '../movieGenres/movieGenres';\nimport { MdbapiServiceConsumer } from '../mdbApi-service-context/mdbApi-service-context';\nimport './movie.css';\n\nconst Movie = ({ movieImgSrc, movieName, releaseDate, description, average, genresId, sessionId, rating, id }) => {\n  let className = 'movie-average';\n\n  if (average >= 0 && average <= 3) {\n    className += ' movie-average__border-rad';\n  } else if (average > 3 && average <= 5) {\n    className += ' movie-average__border-orange';\n  } else if (average > 5 && average <= 7) {\n    className += ' movie-average__border-yellow';\n  } else if (average > 7) {\n    className += ' movie-average__border-green';\n  }\n\n  return (\n    <MdbapiServiceConsumer>\n      {({ getGenres, rateMovie }) => (\n        <Col span={12}>\n          <div className=\"movie\">\n            <div className=\"img-container\">\n              <img alt=\"movieBaner\" src={movieImgSrc} />\n            </div>\n            <div className=\"main-content\">\n              <div className=\"movie-info\">\n                <div className=\"movie-title\">\n                  <h2>{movieName}</h2>\n                  <div className={className}>\n                    <p>{average}</p>\n                  </div>\n                </div>\n                <p className=\"movie-releaseDate\">{releaseDate}</p>\n                <ul className=\"movieGenres\">\n                  {genresId.map((id) => (\n                    <MovieGenres centered getGenres={getGenres} key={id} id={id} className=\"movieGenres-genre\">\n                      Action\n                    </MovieGenres>\n                  ))}\n                </ul>\n                <p className=\"movie-description\">{description}</p>\n              </div>\n              <Rate\n                allowHalf\n                count={10}\n                defaultValue={rating}\n                style={{ fontSize: 17, marginBottom: 10 }}\n                onChange={(rating) => rateMovie(sessionId, String(id), rating)}\n              />\n            </div>\n          </div>\n        </Col>\n      )}\n    </MdbapiServiceConsumer>\n  );\n};\n\nMovie.defaultProps = {\n  id: 0,\n  rating: 0,\n  average: 0,\n  genresId: [],\n  sessionId: '',\n  movieName: '',\n  movieImgSrc: '',\n  releaseDate: '',\n  description: '',\n};\n\nMovie.propTypes = {\n  id: PropTypes.number,\n  rating: PropTypes.number,\n  average: PropTypes.number,\n  sessionId: PropTypes.string,\n  movieName: PropTypes.string,\n  movieImgSrc: PropTypes.string,\n  releaseDate: PropTypes.string,\n  description: PropTypes.string,\n  genresId: PropTypes.arrayOf(PropTypes.any),\n};\n\nexport default Movie;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Row } from 'antd';\nimport Movie from '../movie/movie';\nimport './moviesList.css';\n\nconst MoviesList = ({ moviesData, sessionId }) => (\n  <section className=\"main\">\n    <Row gutter={[36, 35]}>\n      {moviesData.map(({ id, movieImgSrc, movieName, releaseDate, description, average, genresId, rating }) => (\n        <Movie\n          id={id}\n          key={id}\n          rating={rating}\n          average={average}\n          genresId={genresId}\n          sessionId={sessionId}\n          movieName={movieName}\n          movieImgSrc={movieImgSrc}\n          releaseDate={releaseDate}\n          description={description}\n        />\n      ))}\n    </Row>\n  </section>\n);\n\nMoviesList.defaultProps = {\n  sessionId: '',\n  moviesData: [],\n};\n\nMoviesList.propTypes = {\n  sessionId: PropTypes.string,\n  moviesData: PropTypes.arrayOf(PropTypes.any),\n};\n\nexport default MoviesList;\n","import React from 'react';\nimport { Spin } from 'antd';\nimport './spinner.css';\n\nconst Spinner = () => (\n  <div className=\"spinner\">\n    <Spin size=\"large\" />\n  </div>\n);\n\nexport default Spinner;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { debounce } from 'lodash';\nimport './stringRequestMovies.css';\n\nconst StringRequestMovies = ({ updateSearchString }) => {\n  const onLabelChange = (text) => {\n    if (text) {\n      updateSearchString(text);\n    }\n  };\n\n  return (\n    <form>\n      <input\n        className=\"stringRequest\"\n        type=\"text\"\n        placeholder=\"Type to search...\"\n        onChange={debounce((event) => onLabelChange(event.target.value), 1000)}\n        autoFocus\n      />\n    </form>\n  );\n};\n\nStringRequestMovies.defaultProps = {\n  updateSearchString: () => {},\n};\n\nStringRequestMovies.propTypes = {\n  updateSearchString: PropTypes.func,\n};\n\nexport default StringRequestMovies;\n","export default class MdbapiServices {\n  async getResources(fragment) {\n    const apiBase = 'https://api.themoviedb.org/3/search/movie?api_key=e3fe247be4eaa72ef7d3bce48bf58608';\n    const res = await fetch(`${apiBase}${fragment}`);\n\n    if (!res.ok) {\n      throw new Error();\n    }\n\n    const body = await res.json();\n\n    if (body.results.length === 0) {\n      throw new Error();\n    }\n\n    return body;\n  }\n\n  async getGenres() {\n    const apiGenres = 'https://api.themoviedb.org/3/genre/movie/list?api_key=e3fe247be4eaa72ef7d3bce48bf58608';\n    const res = await fetch(apiGenres);\n\n    if (!res.ok) {\n      throw new Error();\n    }\n\n    const body = await res.json();\n\n    return body.genres;\n  }\n\n  async сreateGuestSession() {\n    const sessionId = localStorage.getItem('sessionId');\n\n    if (!sessionId) {\n      const apiAuthentication =\n        'https://api.themoviedb.org/3/authentication/guest_session/new?api_key=e3fe247be4eaa72ef7d3bce48bf58608';\n      const authentication = await fetch(apiAuthentication);\n\n      if (!authentication.ok) {\n        throw new Error();\n      }\n\n      const guestSession = await authentication.json();\n\n      localStorage.setItem('sessionId', guestSession.guest_session_id);\n    }\n  }\n\n  async getGuestSession(guestSessionId, fragment) {\n    const res = await fetch(\n      `https://api.themoviedb.org/3/guest_session/${guestSessionId}/rated/movies?api_key=e3fe247be4eaa72ef7d3bce48bf58608${fragment}`\n    );\n\n    if (!res.ok) {\n      throw new Error();\n    }\n\n    const body = await res.json();\n\n    return body;\n  }\n\n  rateMovie(sessionId, movieId, rating) {\n    fetch(\n      `https://api.themoviedb.org/3/movie/${movieId}/rating?api_key=e3fe247be4eaa72ef7d3bce48bf58608&guest_session_id=${sessionId}`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8',\n        },\n        body: JSON.stringify({\n          value: rating,\n        }),\n      }\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/no_image.f55aafa2.jpg\";","import React, { Component } from 'react';\nimport { format, parseISO } from 'date-fns';\nimport { Pagination, Tabs } from 'antd';\nimport ErrorIndicator from '../errorIndicator/errorIndicator';\nimport MovieList from '../moviesList/moviesList';\nimport Spinner from '../spinner/spinner';\nimport StringRequestMovies from '../stringRequestMovies/stringRequestMovies';\nimport MdbapiServices from '../../services/mdbapiServices';\nimport { MdbapiServiceProvider } from '../mdbApi-service-context/mdbApi-service-context';\nimport './app.css';\nimport icon from './no_image.jpg';\n\nexport default class App extends Component {\n  mdbapiServices = new MdbapiServices();\n\n  state = {\n    ratedPage: 1,\n    sessionId: '',\n    searchPage: 1,\n    searchString: '',\n    ratedTotal: null,\n    searchTotal: null,\n    ratedError: false,\n    searchError: false,\n    ratedLoading: false,\n    searchLoading: false,\n    errorTitle: 'We did not find any movies for this request.',\n  };\n\n  componentDidMount() {\n    this.сreateSessionId();\n  }\n\n  сreateSessionId = async () => {\n    this.mdbapiServices.сreateGuestSession();\n    const newSessionId = localStorage.getItem('sessionId');\n\n    this.setState({\n      sessionId: newSessionId,\n    });\n  };\n\n  createMovieCard = (id, movieImgSrc, movieName, releaseDate, description, average, genresId, rating = 0) => ({\n    id,\n    movieImgSrc,\n    movieName,\n    releaseDate,\n    description,\n    average,\n    genresId,\n    rating,\n  });\n\n  createSearchMovieList = (movies, isEven) => {\n    let newArr = isEven ? movies.slice(10) : movies.slice(0, 10);\n\n    newArr = newArr.map((movie) =>\n      this.createMovieCard(\n        movie.id,\n        this.getImgSrc(movie.poster_path),\n        movie.original_title,\n        this.formatDate(movie.release_date),\n        this.formatMovieDescription(movie.overview),\n        movie.vote_average,\n        movie.genre_ids\n      )\n    );\n\n    this.setState({\n      searchMoviesData: newArr,\n      searchLoading: false,\n      searchError: false,\n    });\n  };\n\n  createRatedMovieList = (movies, isEven) => {\n    let newArr = isEven ? movies.slice(10) : movies.slice(0, 10);\n\n    newArr = newArr.map((movie) =>\n      this.createMovieCard(\n        movie.id,\n        this.getImgSrc(movie.poster_path),\n        movie.original_title,\n        this.formatDate(movie.release_date),\n        this.formatMovieDescription(movie.overview),\n        movie.vote_average,\n        movie.genre_ids,\n        movie.rating\n      )\n    );\n\n    this.setState({\n      ratedMoviesData: newArr,\n      ratedLoading: false,\n      ratedError: false,\n    });\n  };\n\n  updateSearchString = (text) => {\n    const { searchPage } = this.state;\n\n    this.setState({\n      searchString: text,\n    });\n\n    this.updateSearchMovieList(text, searchPage);\n  };\n\n  updateSearchPage = (page) => {\n    const { searchString } = this.state;\n\n    this.updateSearchMovieList(searchString, page);\n  };\n\n  updateRatedPage = (page) => {\n    const { sessionId } = this.state;\n\n    this.setState({\n      ratedPage: page,\n    });\n\n    this.updateRatedMovieList(sessionId, page);\n  };\n\n  getImgSrc = (imgName) => {\n    if (imgName) {\n      return `https://image.tmdb.org/t/p/w200/${imgName}`;\n    }\n\n    return icon;\n  };\n\n  onSearchError = (error) => {\n    if (error.message === 'Failed to fetch') {\n      this.setState({\n        errorTitle: 'Check your internet connection!',\n      });\n    } else {\n      this.setState({\n        errorTitle: 'We did not find any movies for this request.',\n      });\n    }\n\n    this.setState({\n      searchError: true,\n      searchTotal: null,\n      searchLoading: false,\n    });\n  };\n\n  onRatedError = (error) => {\n    if (error.message === 'Failed to fetch') {\n      this.setState({\n        errorTitle: 'Check your internet connection!',\n      });\n    } else {\n      this.setState({\n        errorTitle:\n          'We have had some server trouble, and the films you have rated failed to display. Try your luck later.',\n      });\n    }\n\n    this.setState({\n      ratedError: true,\n      ratedTotal: null,\n      ratedLoading: false,\n    });\n  };\n\n  callback = (activeKey) => {\n    const { sessionId, ratedPage } = this.state;\n\n    if (activeKey === '2') {\n      this.updateRatedMovieList(sessionId, ratedPage);\n    }\n  };\n\n  updateSearchMovieList = async (query, page) => {\n    this.setState({\n      searchError: false,\n      searchLoading: true,\n    });\n\n    try {\n      const newPage = page % 2 === 0 ? page / 2 : (page + 1) / 2;\n      const movieList = await this.mdbapiServices.getResources(`&page=${newPage}&query=${query}`);\n\n      this.createSearchMovieList(movieList.results, page % 2 === 0);\n\n      this.setState({\n        searchTotal: movieList.total_results,\n      });\n    } catch (error) {\n      this.onSearchError(error);\n    }\n  };\n\n  updateRatedMovieList = async (sessionId, page) => {\n    this.setState({\n      ratedError: false,\n      ratedLoading: true,\n    });\n\n    try {\n      const newPage = page % 2 === 0 ? page / 2 : (page + 1) / 2;\n      const movieList = await this.mdbapiServices.getGuestSession(sessionId, `&page=${newPage}`);\n\n      this.createRatedMovieList(movieList.results, page % 2 === 0);\n\n      this.setState({\n        ratedTotal: movieList.total_results,\n      });\n    } catch (error) {\n      this.onRatedError(error);\n    }\n  };\n\n  formatMovieDescription(description) {\n    const words = description.split(' ');\n\n    if (words.length > 15) {\n      return `${words.slice(0, 15).join(' ')}...`;\n    }\n\n    return words.join(' ');\n  }\n\n  formatDate(date) {\n    if (date) {\n      return format(parseISO(date), 'MMMM d, yyyy');\n    }\n\n    return 'NA';\n  }\n\n  render() {\n    const {\n      ratedPage,\n      sessionId,\n      errorTitle,\n      searchPage,\n      ratedTotal,\n      ratedError,\n      searchError,\n      searchTotal,\n      ratedLoading,\n      searchLoading,\n      ratedMoviesData,\n      searchMoviesData,\n    } = this.state;\n    const { TabPane } = Tabs;\n    const hasRatedData = !(ratedLoading || ratedError);\n    const hasSearchData = !(searchLoading || searchError);\n    const ratedSpinner = ratedLoading ? <Spinner /> : null;\n    const searchSpinner = searchLoading ? <Spinner /> : null;\n    const searchErrorMessage = searchError ? <ErrorIndicator errorTitle={errorTitle} /> : null;\n    const ratedErrorMessage = ratedError ? <ErrorIndicator errorTitle={errorTitle} /> : null;\n    const ratedContent = hasRatedData ? <MovieList moviesData={ratedMoviesData} sessionId={sessionId} /> : null;\n    const searchContent = hasSearchData ? <MovieList moviesData={searchMoviesData} sessionId={sessionId} /> : null;\n    const searchPagination = searchTotal ? (\n      <Pagination\n        showSizeChanger={false}\n        defaultCurrent={searchPage}\n        pageSize={10}\n        total={searchTotal}\n        onChange={this.updateSearchPage}\n      />\n    ) : null;\n    const ratedPagination = ratedTotal ? (\n      <Pagination\n        showSizeChanger={false}\n        defaultCurrent={ratedPage}\n        pageSize={10}\n        total={ratedTotal}\n        onChange={this.updateRatedPage}\n      />\n    ) : null;\n\n    return (\n      <section className=\"movieApp\">\n        <MdbapiServiceProvider value={this.mdbapiServices}>\n          <Tabs centered defaultActiveKey=\"1\" onChange={this.callback}>\n            <TabPane tab=\"Search\" key=\"1\">\n              <StringRequestMovies updateSearchString={this.updateSearchString} />\n              {searchSpinner}\n              {searchContent}\n              {searchErrorMessage}\n              <div className=\"paginator\">{searchPagination}</div>\n            </TabPane>\n            <TabPane tab=\"Rated\" key=\"2\">\n              {ratedSpinner}\n              {ratedContent}\n              {ratedErrorMessage}\n              <div className=\"paginator\">{ratedPagination}</div>\n            </TabPane>\n          </Tabs>\n        </MdbapiServiceProvider>\n      </section>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app/app';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}